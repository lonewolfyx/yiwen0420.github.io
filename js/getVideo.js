"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},getVideoUrl=function getVideoUrl(a){a=a||{};var opts={videoType:a.videoType||0,vid:a.vid||"",devid:a.devid||"",uuid:a.uuid||"",sources:a.source||0,netWorkType:a.netWorkType||1},getQQVideoUrl=function(){var e="";$.ajax({url:"http://sec.video.qq.com/p/h5vv.video/getinfo",dataType:"jsonp",data:{otype:"json",vids:opts.vid,platform:"11001"},timeout:3e3,success:function(t){var o=t.vl.vi[0],r=o.ul.ui[0].url,n=o.fn,i=o.fvkey;e=r+n+"?vkey="+i,window.location.href="diaoyu123://playvideo?source_DYR_EQUAL_1_DYR_AND_state_DYR_EQUAL_1_DYR_AND_fileurl_DYR_EQUAL_"+e+"_DYR_AND_vid_DYR_EQUAL_"+opts.vid},error:function(e,t){window.location.href="diaoyu123://playvideo?source_DYR_EQUAL_1_DYR_AND_state_DYR_EQUAL_2_DYR_AND_fileurl_DYR_EQUAL_0_DYR_AND_vid_DYR_EQUAL_"+opts.vid}})},getLEVideoUrl=function getLEVideoUrl(){function getKey(){var e=(new Date).getTime()/1e3,t=x2O.h8("49")?"d":"MD5",o=185025305,r=x2q[t](o,17),n=e;return n=rotateRight(n,r),x2q.O(n,o)}function rotateRight(e,t){for(var o,r=x2O.h8("91")?"g":"tYt2bxik",n=0;x2q[r](t,n);n++)o=x2q.o(1,e),e>>=1,o<<=31,e+=o;return e}var x2O=function(){var j3=33004827954414,k2=function(a4,D4){var b2="",A5=!1;if(a4.length>99<21?4443.3:12)for(var I2=13;I2>1;)b2+=(A5=!A5)?a4.charAt(I2):"@%)eitg)(tDwn".charAt(I2--);return null===D4?eval(b2):D4^a4}("_9(mTe.)ea e(",null);return{h8:function(e){for(var t,o=0,r=33004827954414>k2;o<e.length;)parseInt(e.charAt(o),16).toString(2),t=0==o++?36290:0;return t?!r:r}}}(),_1="feda8dd6e0127da88f3487a646fe8a6b",_2="jjuy9567dfj6bkksomnnghwokjlu0o",_3="tYt2bxik",x2q={D:function(e,t){return e|t},d:function(e,t){return e%t},O:function(e,t){return e^t},k:function(e,t){return e<t},J:function(e,t){return e>>t},R:function(e,t){return e===t},g:function(e,t){return e>t},o:function(e,t){return e&t},l:function(e,t){return e!==t},L:function(e,t){return e!=t},a:function(e,t){return e-t},u:function(e,t){return e==t},e:function(e,t){return e<<t}},Key={liveKey:"feda8dd6e0127da88f3487a646fe8a6b",APIKey:"jjuy9567dfj6bkksomnnghwokjlu0o",secret_key:"tYt2bxik",getAPIKey:function(e){var t=x2O.h8("01")?"toString":"AES";try{return Encode.AES.decrypt(e,this.APIKey)[t](Encode.enc.Utf8)}catch(e){return"error"}},getCl:function(e){var t=x2O.h8("303w")?"showmethemoney":"join",o=x2O.h8("9127")?"error":"liveKey";try{return Encode.MD5(e+t)}catch(e){return o}},getMmsKey:function(e){var t=x2O.h8("49")?"d":"MD5",o=185025305,r=x2q[t](o,17),n=e;return n=this.rotateRight(n,r),x2q.O(n,o)},rotateRight:function(e,t){for(var o,r=x2O.h8("91")?"g":"tYt2bxik",n=0;x2q[r](t,n);n++)o=x2q.o(1,e),e>>=1,o<<=31,e+=o;return e},getLiveTkey:function(e,t){return Encode.MD5([e,t,this.liveKey].join(",")).toString()},getPingBackKey:function(e,t,o,r){var n=x2O.h8("mo48")?"MD5":"rotateRight",i=x2O.h8("8889")?"secret_key":"MD5";return Encode[n](e+t+o+r+this[i]).toString()}},leSources=0==opts.sources&&1==opts.netWorkType&&350||0==opts.sources&&1==opts.netWorkType&&1e3||1==opts.sources&&350||2==opts.sources&&1e3||3==opts.sources&&1300||350,leDomain=opts.sources>0&&opts.sources||opts.netWorkType-1,createDevid=function(){for(var e="",t=32;t--;)e+=Math.floor(16*Math.random()).toString(16);return e};""==opts.devid&&(opts.devid=createDevid().toUpperCase()),""==opts.uuid&&(opts.uuid="1"+String((new Date).getTime()).slice(4)+String(Math.random()).slice(-6)),$.ajax({url:"http://player-pc.le.com/mms/out/video/playJson.json",dataType:"jsonp",data:{id:opts.vid,tkey:getKey(),devid:opts.devid,platid:3,splatid:301,tss:"no",detect:0,dvtype:1e3,accessyx:1,domain:"m.le.com",source:1001,lang:"cn",region:"cn",isHttps:0},timeout:3e3,success:function(e){var t=e.msgs.playurl.domain[leDomain]+e.msgs.playurl.dispatch[leSources][0];getLEVideoUrl2(t)},error:function(e,t){window.location.href="diaoyu123://playvideo?source_DYR_EQUAL_2_DYR_AND_state_DYR_EQUAL_2_DYR_AND_fileurl_DYR_EQUAL_0_DYR_AND_vid_DYR_EQUAL_"+opts.vid+"_DYR_AND_devid_DYR_EQUAL_"+opts.devid}});var getLEVideoUrl2=function(e){var t="vjs_"+(new Date).getTime();""!=e&&$.ajax({url:e,dataType:"jsonp",jsonpCallback:t,data:{format:1,jsonp:t,expect:3,p1:0,p2:"04",termid:2,ostype:"un",hwtype:"iphone",uuid:opts.uuid,vid:opts.vid},timeout:3e3,success:function(e){window.location.href="diaoyu123://playvideo?source_DYR_EQUAL_2_DYR_AND_state_DYR_EQUAL_1_DYR_AND_fileurl_DYR_EQUAL_"+e.location+"_DYR_AND_vid_DYR_EQUAL_"+opts.vid+"_DYR_AND_devid_DYR_EQUAL_"+opts.devid},error:function(e,t){window.location.href="diaoyu123://playvideo?source_DYR_EQUAL_2_DYR_AND_state_DYR_EQUAL_2_DYR_AND_fileurl_DYR_EQUAL_0_DYR_AND_vid_DYR_EQUAL_"+opts.vid+"_DYR_AND_devid_DYR_EQUAL_"+opts.devid}})}},getYouKuVideoUrl=function(){function e(){if("object"==_typeof(window.goldlog)){var n=window.goldlog.Etag;$.ajax({url:t,dataType:"jsonp",data:{vid:opts.vid,ccode:"0501",client_ip:"0.0.0.0",client_ts:o,utid:n},timeout:3e3,success:function(e){var t="",o="",r=0,n=0,i=0,a=0,_=e.data.stream;for(var s in _){if("3gphd"==_[s].stream_type&&_[s].milliseconds_video>r){r=_[s].milliseconds_video,i=_[s].size,t="ffconcat version 1.0\r\n";for(var d in _[s].segs)t+="file "+_[s].segs[d].cdn_url+"\r\n",t+="duration "+_[s].segs[d].total_milliseconds_video/1e3+"\r\n"}if("mp4hd"==_[s].stream_type&&_[s].milliseconds_video>n){n=_[s].milliseconds_video,a=_[s].size,o="ffconcat version 1.0\r\n";for(var d in _[s].segs)o+="file "+_[s].segs[d].cdn_url+"\r\n",o+="duration "+_[s].segs[d].total_milliseconds_video/1e3+"\r\n"}}var c="",u=0,l=0;1==opts.netWorkType?(c=t||o,u=r||n,l=i||a):2==opts.netWorkType&&(c=o||t,u=n||r,l=a||i),u=Math.floor(u/1e3),""!=c&&JDY.loadFfconcat(c,u,l,opts.vid)},error:function(e,t){window.location.href="diaoyu123://playvideo?source_DYR_EQUAL_3_DYR_AND_state_DYR_EQUAL_2_DYR_AND_fileurl_DYR_EQUAL_0_DYR_AND_vid_DYR_EQUAL_"+opts.vid}})}else setTimeout(function(){r++,r>25?window.location.href="diaoyu123://playvideo?source_DYR_EQUAL_3_DYR_AND_state_DYR_EQUAL_2_DYR_AND_fileurl_DYR_EQUAL_0_DYR_AND_vid_DYR_EQUAL_"+opts.vid:e()},200)}loadfile("https://log.mmstat.com/eg.js","js");var t="https://ups.youku.com/ups/get.json",o=parseInt((new Date).getTime()/1e3),r=0;e()},getLeCloudVideoUrl=function(){var e=function(){function e(e,t,o,r,i,a){return e=n(n(t,e),n(r,a)),n(e<<i|e>>>32-i,o)}function t(t,o,r,n,i,a,_){return e(o&r|~o&n,t,o,i,a,_)}function o(t,o,r,n,i,a,_){return e(o&n|r&~n,t,o,i,a,_)}function r(t,o,r,n,i,a,_){return e(r^(o|~n),t,o,i,a,_)}function n(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}return{hash:function(i){for(var a=[],_=0;_<8*i.length;_+=8)a[_>>5]|=(255&i.charCodeAt(_/8))<<_%32;i=8*i.length,a[i>>5]|=128<<i%32,a[14+(i+64>>>9<<4)]=i,i=1732584193;for(var _=-271733879,s=-1732584194,d=271733878,c=0;c<a.length;c+=16){var u=i,l=_,f=s,p=d;i=t(i,_,s,d,a[c+0],7,-680876936),d=t(d,i,_,s,a[c+1],12,-389564586),s=t(s,d,i,_,a[c+2],17,606105819),_=t(_,s,d,i,a[c+3],22,-1044525330),i=t(i,_,s,d,a[c+4],7,-176418897),d=t(d,i,_,s,a[c+5],12,1200080426),s=t(s,d,i,_,a[c+6],17,-1473231341),_=t(_,s,d,i,a[c+7],22,-45705983),i=t(i,_,s,d,a[c+8],7,1770035416),d=t(d,i,_,s,a[c+9],12,-1958414417),s=t(s,d,i,_,a[c+10],17,-42063),_=t(_,s,d,i,a[c+11],22,-1990404162),i=t(i,_,s,d,a[c+12],7,1804603682),d=t(d,i,_,s,a[c+13],12,-40341101),s=t(s,d,i,_,a[c+14],17,-1502002290),_=t(_,s,d,i,a[c+15],22,1236535329),i=o(i,_,s,d,a[c+1],5,-165796510),d=o(d,i,_,s,a[c+6],9,-1069501632),s=o(s,d,i,_,a[c+11],14,643717713),_=o(_,s,d,i,a[c+0],20,-373897302),i=o(i,_,s,d,a[c+5],5,-701558691),d=o(d,i,_,s,a[c+10],9,38016083),s=o(s,d,i,_,a[c+15],14,-660478335),_=o(_,s,d,i,a[c+4],20,-405537848),i=o(i,_,s,d,a[c+9],5,568446438),d=o(d,i,_,s,a[c+14],9,-1019803690),s=o(s,d,i,_,a[c+3],14,-187363961),_=o(_,s,d,i,a[c+8],20,1163531501),i=o(i,_,s,d,a[c+13],5,-1444681467),d=o(d,i,_,s,a[c+2],9,-51403784),s=o(s,d,i,_,a[c+7],14,1735328473),_=o(_,s,d,i,a[c+12],20,-1926607734),i=e(_^s^d,i,_,a[c+5],4,-378558),d=e(i^_^s,d,i,a[c+8],11,-2022574463),s=e(d^i^_,s,d,a[c+11],16,1839030562),_=e(s^d^i,_,s,a[c+14],23,-35309556),i=e(_^s^d,i,_,a[c+1],4,-1530992060),d=e(i^_^s,d,i,a[c+4],11,1272893353),s=e(d^i^_,s,d,a[c+7],16,-155497632),_=e(s^d^i,_,s,a[c+10],23,-1094730640),i=e(_^s^d,i,_,a[c+13],4,681279174),d=e(i^_^s,d,i,a[c+0],11,-358537222),s=e(d^i^_,s,d,a[c+3],16,-722521979),_=e(s^d^i,_,s,a[c+6],23,76029189),i=e(_^s^d,i,_,a[c+9],4,-640364487),d=e(i^_^s,d,i,a[c+12],11,-421815835),s=e(d^i^_,s,d,a[c+15],16,530742520),_=e(s^d^i,_,s,a[c+2],23,-995338651),i=r(i,_,s,d,a[c+0],6,-198630844),d=r(d,i,_,s,a[c+7],10,1126891415),s=r(s,d,i,_,a[c+14],15,-1416354905),_=r(_,s,d,i,a[c+5],21,-57434055),i=r(i,_,s,d,a[c+12],6,1700485571),d=r(d,i,_,s,a[c+3],10,-1894986606),s=r(s,d,i,_,a[c+10],15,-1051523),_=r(_,s,d,i,a[c+1],21,-2054922799),i=r(i,_,s,d,a[c+8],6,1873313359),d=r(d,i,_,s,a[c+15],10,-30611744),s=r(s,d,i,_,a[c+6],15,-1560198380),_=r(_,s,d,i,a[c+13],21,1309151649),i=r(i,_,s,d,a[c+4],6,-145523070),d=r(d,i,_,s,a[c+11],10,-1120210379),s=r(s,d,i,_,a[c+2],15,718787259),_=r(_,s,d,i,a[c+9],21,-343485551),i=n(i,u),_=n(_,l),s=n(s,f),d=n(d,p)}for(a=[i,_,s,d],i="",_=0;_<4*a.length;_++)i+="0123456789abcdef".charAt(a[_>>2]>>_%4*8+4&15)+"0123456789abcdef".charAt(a[_>>2]>>_%4*8&15);return i}}}(),t={decode:function(e){var t,o,r,n,i,a=0,_=0;n="";var s=[];if(!e)return e;e+="";do{t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(a++)),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(a++)),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(a++)),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(a++)),r=t<<18|o<<12|n<<6|i,t=r>>16&255,o=r>>8&255,r&=255,s[_++]=64==n?String.fromCharCode(t):64==i?String.fromCharCode(t,o):String.fromCharCode(t,o,r)}while(a<e.length);return n=s.join("")},encode:function(e){var t,o,r,n,i=0,a=0,_="",_=[];if(!e)return e;e=this.utf8_encode(e+"");do{t=e.charCodeAt(i++),o=e.charCodeAt(i++),r=e.charCodeAt(i++),n=t<<16|o<<8|r,t=n>>18&63,o=n>>12&63,r=n>>6&63,n&=63,_[a++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(o)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)}while(i<e.length);switch(_=_.join(""),e.length%3){case 1:_=_.slice(0,-2)+"==";break;case 2:_=_.slice(0,-1)+"="}return _},utf8to16:function(e){var t,o,r,n,i,a;for(t="",r=e.length,o=0;o<r;)switch((n=e.charCodeAt(o++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(o-1);break;case 12:case 13:i=e.charCodeAt(o++),t+=String.fromCharCode((31&n)<<6|63&i);break;case 14:i=e.charCodeAt(o++),a=e.charCodeAt(o++),t+=String.fromCharCode((15&n)<<12|(63&i)<<6|(63&a)<<0)}return t}},o="91c48ab8fe",r=function(t){return e.hash(t.join("")+"fbeh5player12c43eccf2bec3300344")}(["html5",o,opts.vid,parseInt(.001*new Date)]),n=function(){var e,t,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];for(t=16,e=0;32>e;e++)r[e]=o[0|Math.random()*t];return r.join("")}()+"_0",i="letvcloud"+parseInt(1*new Date),a="http://yuntv.letv.com/bcloud.html?uu="+o+"&vu="+opts.vid+"&auto_play=1&width=640&height=360&lang=zh_CN";$.ajax({url:"http://api.letvcloud.com/gpc.php",dataType:"jsonp",jsonpCallback:i,data:{format:"jsonp",ver:"2.4",cf:"html5",ran:parseInt(.001*new Date),pver:"H5_Vod_20170406_4.8.3",bver:"chrome57.0.2987.133",uuid:n,pf:"html5",spf:"0",uu:o,vu:opts.vid,lang:"zh_CN",pet:parseInt(new Date),sign:r,page_url:encodeURIComponent(a),jsonp:i},timeout:3e3,success:function(e){var o=t.decode(e.data.videoinfo.medialist[0].urllist[0].url),r=e.data.videoinfo.vid;_(o,r)},error:function(e,t){window.location.href="diaoyu123://playvideo?source_DYR_EQUAL_3_DYR_AND_state_DYR_EQUAL_2_DYR_AND_fileurl_DYR_EQUAL_0_DYR_AND_vid_DYR_EQUAL_"+opts.vid}});var _=function(e,t){var o="letvcloud"+parseInt(1*new Date)+Math.floor(100*Math.random());$.ajax({url:e,dataType:"jsonp",jsonpCallback:o,data:{jsonp:o,uuid:n,vid:t,ajax:1,_r:"jsonp",format:1,expect:3},timeout:3e3,success:function(e){var t=e.location;window.location.href="diaoyu123://playvideo?source_DYR_EQUAL_3_DYR_AND_state_DYR_EQUAL_1_DYR_AND_fileurl_DYR_EQUAL_"+t+"_DYR_AND_vid_DYR_EQUAL_"+opts.vid},error:function(e,t){window.location.href="diaoyu123://playvideo?source_DYR_EQUAL_3_DYR_AND_state_DYR_EQUAL_2_DYR_AND_fileurl_DYR_EQUAL_0_DYR_AND_vid_DYR_EQUAL_"+opts.vid}})}};switch(opts.videoType){case 1:""!=opts.vid&&getQQVideoUrl();break;case 2:""!=opts.vid&&getLEVideoUrl();break;case 3:""!=opts.vid&&getYouKuVideoUrl();break;case 4:""!=opts.vid&&getLeCloudVideoUrl();break;default:return void console.log("视频类型不正确")}},loadfile=function(e,t){var o=null;"js"==t?(o=document.createElement("script"),o.setAttribute("type","text/javascript"),o.setAttribute("src",e)):"css"==t&&(o=document.createElement("link"),o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",e)),void 0!==o&&document.getElementsByTagName("head")[0].appendChild(o)};